{% extends 'base.html' %}

{% block content %}
<div style="margin-bottom: 20px;">
    <h2>Reviewer Dashboard</h2>
    <p>Welcome, <strong>{{ user.username }}</strong>. Below are the proposals submitted for review.</p>
</div>

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Researcher</th>
            <th>Submission Date</th>
            <th>Status</th>
            <th>Proposal Document</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for proposal in proposals %}
        <tr>
            <td>#{{ proposal.proposalID }}</td>
            <td>{{ proposal.title }}</td>
            <td>
                {{ proposal.researcher.username }} 
                <small style="color: gray;">({{ proposal.researcher.department }})</small>
            </td>
            <td>{{ proposal.submissionDate }}</td>
            <td>{{ proposal.status }}</td>
            <td>
                    {% if proposal.pdf_file %}
                        <a href="{{ proposal.pdf_file.url }}" target="_blank" class="btn btn-primary">
                            View PDF
                        </a>
                    {% else %}
                        <span class="text-error">No file uploaded</span>
                    {% endif %}
                </td>
            <td>
                <a href="{% url 'evaluate_proposal' proposal.proposalID %}" class="btn btn-primary">
                    Evaluate
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="7" style="text-align: center;">No proposals available for review.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
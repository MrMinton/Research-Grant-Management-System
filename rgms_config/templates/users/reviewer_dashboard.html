{% extends 'base.html' %}

{% block content %}

<div class="container">
    <div style="margin-top: 30px; margin-bottom: 20px;">
        <h2 class="hero-title">Reviewer Dashboard</h2>
        <p style="color: rgba(255,255,255,0.9); margin-top: -10px;">
            Welcome, <strong>{{ user.username }}</strong>. Below are the proposals submitted for review.
        </p>
    </div>
</div>

<div class="container">
    <div class="card"> <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Researcher</th>
                    <th>Submission Date</th>
                    <th>Status</th>
                    <th>Proposal Document</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for proposal in proposals %}
                <tr>
                    <td><span class="badge bg-info">#{{ proposal.proposalID }}</span></td>
                    <td style="font-weight: 500;">{{ proposal.title }}</td>
                    <td>
                        {{ proposal.researcher.username }} 
                        <div style="font-size: 0.8rem; color: gray;">{{ proposal.researcher.department }}</div>
                    </td>
                    <td>{{ proposal.submissionDate }}</td>
                    <td>
                        <span class="badge {% if proposal.status == 'Pending' %}bg-warning{% elif proposal.status == 'Approved' %}bg-success{% else %}bg-info{% endif %}">
                            {{ proposal.status }}
                        </span>
                    </td>
                    <td>
                        {% if proposal.pdf_file %}
                            <a href="{{ proposal.pdf_file.url }}" target="_blank" class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.85rem;">
                                View PDF
                            </a>
                        {% else %}
                            <span class="text-error" style="color: #ef4444; font-size: 0.9rem;">No file</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'evaluate_proposal' proposal.proposalID %}" class="btn btn-primary">
                            Evaluate
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" style="text-align: center; padding: 40px; color: #6b7280;">
                        <p>No proposals available for review at this time.</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
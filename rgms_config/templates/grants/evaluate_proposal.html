{% extends 'base.html' %}

{% block content %}

<div class="container">
    <div style="margin-top: 30px; margin-bottom: 20px;">
        <h2 class="hero-title">Evaluate Proposal</h2>
        <p style="color: rgba(255,255,255,0.9); margin-top: -10px;">
            Reviewing: <strong>{{ proposal.title }}</strong>
        </p>
    </div>
</div>

<div class="container">
    <div class="card">
        
        <div style="background: #f9fafb; padding: 25px; border-radius: 12px; margin-bottom: 30px; border: 1px solid #e5e7eb;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                
                <div>
                    <small style="color: #6b7280; text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px;">
                        Submitted By
                    </small>
                    <div style="font-weight: 700; font-size: 1.1rem; color: #1f2937; margin-top: 4px;">
                        {{ proposal.researcher.username }}
                    </div>
                    <td><span class="badge bg-secondary">v{{ proposal.version|floatformat:1 }}</span></td>
                    <div style="font-size: 0.9rem; color: #6b7280;">
                        {{ proposal.researcher.department }} &bull; {{ proposal.submissionDate }}
                    </div>
                </div>

                <div>
                    {% if proposal.pdf_file %}
                        <a href="{{ proposal.pdf_file.url }}" target="_blank" class="btn btn-secondary" style="border: 1px solid #d1d5db; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                            ðŸ“„ View Proposal PDF
                        </a>
                    {% else %}
                        <span class="badge bg-warning">No PDF Uploaded</span>
                    {% endif %}
                </div>
            </div>
        </div>

        <h3 style="font-size: 1.2rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 10px; margin-bottom: 25px;">
            Evaluation Criteria
        </h3>

        <form method="post">
            {% csrf_token %}
            
            {% for field in form %}
                <div style="margin-bottom: 25px;">
                    <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #374151; font-size: 0.95rem;">
                        {{ field.label }}
                    </label>
                    
                    {{ field }}
                    
                    {% if field.help_text %}
                        <small style="color: #6b7280; display: block; margin-top: 5px;">{{ field.help_text }}</small>
                    {% endif %}
                    
                    {% for error in field.errors %}
                        <div style="color: #ef4444; font-size: 0.85rem; margin-top: 5px; font-weight: 500;">
                            âš  {{ error }}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}

            <div style="display: flex; gap: 15px; margin-top: 40px; padding-top: 25px; border-top: 1px solid #f3f4f6;">
                <button type="submit" class="btn btn-primary" style="padding: 12px 30px; font-size: 1rem;">
                    Submit Evaluation
                </button>
                <a href="{% url 'reviewer_dashboard' %}" class="btn btn-secondary" style="padding: 12px 25px;">
                    Cancel
                </a>
            </div>
        </form>

    </div>
</div>
{% endblock %}